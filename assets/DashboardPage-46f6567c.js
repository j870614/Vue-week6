import{_ as h,R as l,a as d,r as c,o as a,c as p,b as s,d as k,w as m,k as _,l as f,h as $,e as v}from"./index-23b742f9.js";const g="https://vue3-course-api.hexschool.io/",x={components:{RouterView:l,RouterLink:d},data(){return{checkSuccess:!1}},methods:{checkAdmin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)token\s*=\s*([^;]*).*$)|^.*$/,"$1");t?(this.$http.defaults.headers.common.Authorization=t,this.$http.post(`${g}v2/api/user/check`).then(e=>{this.checkSuccess=e.data.success}).catch(e=>{alert(e.response.data.message),this.$router.push("/login")})):(alert("尚未登入，引導至登入頁"),this.$router.push("/login"))},logout(){document.cookie="token=; expires=;",alert("已登出"),this.$router.push("/")}},mounted(){this.checkAdmin()}},R=s("h1",null,"後台頁面",-1),V={class:"nav"};function w(t,e,B,C,n,o){const r=c("RouterLink"),i=c("RouterView");return a(),p("div",null,[R,s("nav",V,[k(r,{class:"nav-link",to:"/"},{default:m(()=>[v("返回首頁")]),_:1}),s("a",{class:"nav-link",href:"#",onClick:e[0]||(e[0]=_((...u)=>o.logout&&o.logout(...u),["prevent"]))},"登出")]),n.checkSuccess?(a(),f(i,{key:0})):$("",!0)])}const A=h(x,[["render",w]]);export{A as default};
